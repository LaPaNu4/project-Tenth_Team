{"mappings":"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","sources":["src/js/upcomingThisMounth.js"],"sourcesContent":["\nimport axios from 'axios';\nimport { result } from 'lodash';\n\nconst URL = 'https://api.themoviedb.org/3/movie/upcoming';\nconst API_KEY = '0b7ed72c0b07bc683ffc3b8a0e430792';\nconst GENRE_URL = `https://api.themoviedb.org/3/genre/movie/list`;\n\nconst upcomingFilm = document.querySelector('.upcoming-film');\nconst favoriteMovies = 'favoriteMovies';\n\n\nasync function getUpcomingData() {\n  const response = await axios.get(`${URL}?api_key=${API_KEY}`);\n  const result = response.data.results;\n\n  return result;\n}\n\nasync function getGenresById(genreIds) {\n  const response = await axios.get(`${GENRE_URL}?api_key=${API_KEY}`);\n  const data = response.data.genres;\n\n  const genreNames = genreIds.map(genreId => {\n    const genre = data.find(genre => genre.id === genreId);\n    return genre.name;\n  });\n\n  return genreNames.join(', ');\n}\n\nasync function getUpcoming() {\n  try {\n    const data = await getUpcomingData();\n\n    if (data.length === 0) {\n      renderMarkupError();\n      return;\n    }\n\n    const randomFilm = Math.floor(Math.random() * data.length);\n    const renderFilm = data[randomFilm];\n    const idFilm = renderFilm.id;\n    const render = await createMarkup(renderFilm);\n    renderMarkup(render);\n\n    const upcomingBtn = document.querySelector('.upcoming_content_btn');\n    let savedLocal = localStorage.getItem('favoriteMovies');\n    let parsedLocal = JSON.parse(savedLocal);\n    parsedLocal = parsedLocal ? parsedLocal : [];\n\n    if (parsedLocal.includes(idFilm)) {\n      upcomingBtn.textContent = 'Remove from my library';\n    } else {\n      upcomingBtn.textContent = 'Add to my library';\n    }\n\n    upcomingBtn.addEventListener('click', () => {\n      let savedLocal = localStorage.getItem('favoriteMovies');\n      let parsedLocal = JSON.parse(savedLocal);\n      parsedLocal = parsedLocal ? parsedLocal : [];\n\n        if (!parsedLocal.includes(idFilm)) {\n        parsedLocal.push(idFilm);\n        localStorage.setItem(favoriteMovies, JSON.stringify(parsedLocal));\n        upcomingBtn.textContent = 'Remove from my library';\n      } else {\n        let index = parsedLocal.findIndex(id => id === idFilm);\n        parsedLocal.splice(index, 1);\n        localStorage.setItem(favoriteMovies, JSON.stringify(parsedLocal));\n        upcomingBtn.textContent = 'Add to my library';\n      }\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function createMarkup({\n  backdrop_path,\n  genre_ids,\n  title,\n  overview,\n  vote_average,\n  vote_count,\n  release_date,\n  popularity,\n}) {\n  const genreNames = await getGenresById(genre_ids);\n\n  return `\n    <img\n      class=\"upcoming_img\"\n      src=\"https://image.tmdb.org/t/p/original${backdrop_path}\"\n      alt=\"Poster ${title}\"\n    />\n\n    <div class=\"upcoming_content\">\n      <h3 class=\"upcoming_name\">${title}</h3>\n\n      <div class=\"upcoming_thumb\">\n        <ul class=\"upcoming-list left\">\n          <li class=\"upcoming_list_item\">\n            <p class=\"upcoming_list_text color-h\">Release date</p>\n            <p class=\"upcoming_list_date color-p\">${release_date}</p>\n          </li>\n          <li class=\"upcoming_list_item\">\n            <p class=\"upcoming_list_text color-h\">Vote / Votes</p>\n            <p class=\"upcoming_list_vote\">\n              <span class=\"vote\">${vote_average}</span> / <span class=\"vote\">${vote_count}</span>\n            </p>\n          </li>\n        </ul>\n\n        <ul class=\"upcoming-list right\">\n          <li class=\"upcoming_list_item\">\n            <p class=\"upcoming_list_text color-h\">Popularity</p>\n            <p class=\"upcoming_list_pop\">${popularity.toFixed(1)}</p>\n          </li>\n          <li class=\"upcoming_list_item\">\n            <p class=\"upcoming_list_text color-h\">Genre</p>\n            <p class=\"upcoming_list_genre\">${genreNames}</p>\n          </li>\n        </ul>\n      </div>\n\n      <h3 class=\"upcoming_content_title color-h\">About</h3>\n      <p class=\"upcoming_content_text\">${overview}</p>\n\n      <button type=\"button\" class=\"upcoming_content_btn\" id=\"addLibrary\">\n         Add to my library\n      </button>\n    </div>\n  `;\n}\n\n\nfunction renderMarkup(markup) {\n  upcomingFilm.innerHTML = markup;\n}\n\nfunction renderMarkupError() {\n  upcomingFilm.innerHTML = `<div class=\"upcoming-error-container\">\n    <p class=\"upcoming_error_container_text\">\n    OOPS...<br />\n    We are very sorry!<br />\n    But we couldn't find any upcoming movies this month.\n    </p>\n  </div>`;\n}\n\ngetUpcoming();"],"names":["$bpxeT","parcelRequire","$97934864da50344b$var$URL","$97934864da50344b$var$API_KEY","$97934864da50344b$var$GENRE_URL","$97934864da50344b$var$upcomingFilm","document","querySelector","$97934864da50344b$var$favoriteMovies","$97934864da50344b$var$getUpcomingData","$97934864da50344b$var$_getUpcomingData","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","result1","$dIxxU","default","get","concat","_ctx","sent","data","results","$97934864da50344b$var$getGenresById","genreIds","$97934864da50344b$var$_getGenresById","genreNames","genres","map","genreId","find","genre","id","name","join","$97934864da50344b$var$_getUpcoming","randomFilm","renderFilm","idFilm","upcomingBtn","savedLocal1","length","$97934864da50344b$var$renderMarkupError","Math","floor","random","$97934864da50344b$var$createMarkup","$97934864da50344b$var$renderMarkup","localStorage","getItem","JSON","parse","includes","textContent","addEventListener","savedLocal","parsedLocal","index","findIndex","splice","setItem","stringify","push","console","log","t0","_","$97934864da50344b$var$_createMarkup","param","backdrop_path","genre_ids","title","overview","vote_average","vote_count","release_date","popularity","toFixed","markup","innerHTML","$97934864da50344b$var$getUpcoming"],"version":3,"file":"index.5c5aa553.js.map"}