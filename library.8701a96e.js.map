{"mappings":"gfAAAA,EAAA,SAAMC,IAAN,IAEMC,EAAUC,SAASC,cAAc,kBAEjCC,GADaF,SAASC,cAAc,gBACzBD,SAASC,cAAc,UAClCE,EAAeH,SAASC,cAAc,kBACtCG,EAAWJ,SAASC,cAAc,qBAClCI,EAAkBL,SAASC,cAAc,0BAuC/CC,EAASI,UAAUC,IAAI,QACvBJ,EAAaG,UAAUC,IAAI,QAC3BH,EAASE,UAAUC,IAAI,QAGvB,IAEMC,EAAiB,GAgCvB,IAAMC,EAAsB,SAACC,GACzB,IAAMC,EAAQN,EAAgBO,MAExBC,EAAeH,EAAOI,QAAO,SAAAC,G,OAASA,EAAMJ,QAAUA,C,IAC5D,GAAGE,EAAaG,OAAS,EAAG,CACxB,IAAMC,EAAeC,EAAYL,GACjCd,EAAQoB,mBAAmB,YAAaF,GACxCf,EAASI,UAAUC,IAAI,QACvBL,EAASI,UAAUc,OAAO,O,MAE1BrB,EAAQsB,UAAY,GACpBnB,EAASI,UAAUC,IAAI,QACvBL,EAASI,UAAUc,OAAO,O,EAI3BF,EAAc,SAACI,GAEd,IAAOC,EAAuCD,EAAvCC,IAAKC,EAAkCF,EAAlCE,MAAOb,EAA2BW,EAA3BX,MAAOc,EAAoBH,EAApBG,KAAMC,EAAcJ,EAAdI,OAAQC,EAAML,EAANK,GACxC,MAAO,mCAE2BC,OADVD,EAAG,+CAEGC,OADIL,EAAI,4CAERK,OADAJ,EAAM,+CAEPI,OADCjB,EAAM,8CAEHiB,OADJH,EAAK,kDACMG,OAAPF,EAAO,qCAG9CG,KAAK,G,EAGPC,OAAOC,OA7DP,WACI,IAAMC,EAAWC,KAAKC,MAAMC,aAAaC,QAZ7B,mBAcZ,IAAIJ,GAAgC,IAApBA,EAAShB,OAGrB,OAFAb,EAAaG,UAAUc,OAAO,aAC9BjB,EAAaG,UAAUC,IAAI,QAI/ByB,EAASK,SAAQ,SAAAC,GACbC,MAAM,GAAuBX,OAdpB,sCAcS,aAAsBA,OAbhC,mCAa6B,KAAYA,OAATU,IACvCE,MAAK,SAAAC,G,OAAQA,EAAKC,M,IAClBF,MAAK,SAAAG,GACFnC,EAAeoC,KAAKD,GAEpB,IAAME,EAAa3B,EAAYyB,GAC/B5C,EAAQoB,mBAAmB,YAAa0B,GACxC3C,EAASI,UAAUC,IAAI,QACvBL,EAASI,UAAUc,OAAO,QAC1BhB,EAASE,UAAUC,IAAI,QACvBH,EAASE,UAAUc,OAAO,O,IAE7B0B,OAAM,SAAAC,GAEP,MADAC,QAAQC,IAAIF,GACN,IAAIG,MAAMH,E,OAGpBtC,EAAoBD,E,EAmCxBJ,EAAS+C,iBAAiB,SAAS,W,OAAM1C,EAAoBD,E","sources":["src/js/library-II.js"],"sourcesContent":["const { all } = require(\"axios\");\n\nconst gallery = document.querySelector('.movies-galery');\nconst searchMore = document.querySelector('.search-more');\nconst loadMore = document.querySelector('.load');\nconst emptyGallery = document.querySelector('.empty-gallery');\nconst dropDown = document.querySelector('.dropdown-library');\nconst dropMenuLibrary = document.querySelector('.dropdown-menu-library');\n\n\n//adding dropdown functionality\n// const dropContent = document.querySelector('.drop-content');\n// const genresBtn = document.querySelector('.drop');\n// const pickedGenre = document.querySelector('.drop-item');\n\n// const dropShow = () => {\n//     if(dropContent.classList.contains('show')) {\n//         dropContent.classList.remove('show');\n//         dropContent.classList.add('hide');\n//     } else {\n//         dropContent.classList.add('show');\n//         dropContent.classList.remove('hide');\n//     }\n// }\n\n// const chosenGenre = (e) => {\n//     e.preventDefault();\n//     let chosen = e.target;\n//     console.log(chosen);\n//\n//     chosen.classList.toggle('orange');\n//     genresBtn.classList.remove('orange');\n//\n//     genresBtn.textContent = chosen.textContent;\n//\n//     dropContent.classList.remove('show');\n//     chosen.classList.remove('orange');\n// }\n//\n// genresBtn.addEventListener('click', dropShow);\n// dropContent.addEventListener('click', chosenGenre);\n\n\n\nconst STORAGE = 'favoriteMovies';\n\nloadMore.classList.add('hide');\nemptyGallery.classList.add('hide');\ndropDown.classList.add('hide');\n\n\nconst BASE_URL = 'https://api.themoviedb.org/3/movie/';\nconst API_KEY = '14b16a10583a3d9315723a356100e4ad';\nconst renderedMovies = [];\n\nfunction fetchFromLibrary() {\n    const movieIds = JSON.parse(localStorage.getItem(STORAGE));\n\n    if(!movieIds || movieIds.length === 0) {\n        emptyGallery.classList.remove('hide');\n        emptyGallery.classList.add('show');\n        return;\n    }\n\n    movieIds.forEach(movie_id => {\n        fetch(`${BASE_URL}?api_key=${API_KEY}&${movie_id}`)\n        .then(data => data.json())\n        .then(movieData => {\n            renderedMovies.push(movieData);\n\n            const moviesById = movieMarkUp(movieData);\n            gallery.insertAdjacentHTML('beforeend', moviesById);\n            loadMore.classList.add('show');\n            loadMore.classList.remove('hide');\n            dropDown.classList.add('show');\n            dropDown.classList.remove('hide');\n        })            \n        .catch(error => {\n        console.log(error);\n        throw new Error(error);\n        });\n    })\n    filterMoviesByGenre(renderedMovies);\n}\n\nconst filterMoviesByGenre = (movies) => {\n    const genre = dropMenuLibrary.value;\n\n    const chosenMovies = movies.filter(movie => movie.genre === genre);\n    if(chosenMovies.length > 0) {\n        const galleryItems = movieMarkUp(chosenMovies);\n        gallery.insertAdjacentHTML('beforeend', galleryItems);\n        loadMore.classList.add('show');\n        loadMore.classList.remove('hide');\n    } else {\n        gallery.innerHTML = '';\n        loadMore.classList.add('hide');\n        loadMore.classList.remove('show');\n    }\n}    \n\n const movieMarkUp = (dataComing) => {\n    // return dataComing.map(item => {}\n        const {img, title, genre, year, rating, id} = dataComing;\n        return (`\n        <div class=\"movie\" id=${id}>\n            <img class=\"movie-img\" src=\"${img}\">\n            <h2 class=\"movie-title\">${title}</h2>\n            <h2 class=\"movie-genre\">${genre}</h2>\n            <h2 class=\"movie-year\">${year}</h2>\n            <span class=\"movie-rating\">${rating}</span>\n        </div>\n        `\n).join('');\n}\n\nwindow.onload = fetchFromLibrary;\ndropDown.addEventListener('click', () => filterMoviesByGenre(renderedMovies));\n\n\n"],"names":["parcelRequire","all","$463ad9cb83219124$var$gallery","document","querySelector","$463ad9cb83219124$var$loadMore","$463ad9cb83219124$var$emptyGallery","$463ad9cb83219124$var$dropDown","$463ad9cb83219124$var$dropMenuLibrary","classList","add","$463ad9cb83219124$var$renderedMovies","$463ad9cb83219124$var$filterMoviesByGenre","movies","genre","value","chosenMovies","filter","movie","length","galleryItems","$463ad9cb83219124$var$movieMarkUp","insertAdjacentHTML","remove","innerHTML","dataComing","img","title","year","rating","id","concat","join","window","onload","movieIds","JSON","parse","localStorage","getItem","forEach","movie_id","fetch","then","data","json","movieData","push","moviesById","catch","error","console","log","Error","addEventListener"],"version":3,"file":"library.8701a96e.js.map"}