{"mappings":"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","sources":["src/js/library-II.js"],"sourcesContent":["import Notiflix from 'notiflix';\nconst gallery = document.querySelector('.movies-gallery');\nconst searchMore = document.querySelector('.search-more');\nconst loadMore = document.querySelector('.load');\nconst emptyGallery = document.querySelector('.empty-gallery');\nconst dropDown = document.querySelector('.dropdown-library');\nconst dropLibraryItem = document.querySelectorAll('.dropdown-item-library');\nconst dropMenuLibrary = document.querySelector('.dropdown-menu-library');\nconst modalEl = document.querySelector('.modal-backdrop');\nconst closeBtnEl = document.querySelector('.film-card-close-btn');\nmodalEl.addEventListener('click', fetchFromLibrary);\n// closeBtnEl.addEventListener('click', fetchFromLibrary);\n\nconst renderedMovies = [];\n\nconst STORAGE = 'favoriteMovies';\nloadMore.classList.add('hide');\nemptyGallery.classList.add('show');\ndropDown.classList.add('hide');\n\nfunction fetchFromLibrary() {\n  const movieIds = JSON.parse(localStorage.getItem(STORAGE));\n\n  if (!movieIds || movieIds.length === 0) {\n    // console.log('відкрився if');\n    gallery.innerHTML = '';\n    emptyGallery.classList.remove('hide');\n    emptyGallery.classList.add('show');\n    loadMore.classList.remove('show');\n    loadMore.classList.add('hide');\n    dropDown.classList.remove('show');\n    dropDown.classList.add('hide');\n    // emptyGallery.classList.remove('hide');\n    // emptyGallery.classList.add('show');\n    return;\n  }\n\n  const BASE_URL = 'https://api.themoviedb.org/3/movie/';\n  const API_KEY = '14b16a10583a3d9315723a356100e4ad';\n  const fetchMovies = movieIds.map(movie => {\n    return fetch(`${BASE_URL}${movie.id}?api_key=${API_KEY}`).then(data =>\n      data.json()\n    );\n  });\n\n  Promise.all(fetchMovies)\n    .then(movieData => {\n      renderedMovies.push(...movieData);\n\n      gallery.innerHTML = '';\n\n      const moviesById = movieMarkUp(movieData);\n\n      gallery.insertAdjacentHTML('beforeend', moviesById);\n      emptyGallery.classList.add('hide');\n      emptyGallery.classList.remove('show');\n      loadMore.classList.add('show');\n      loadMore.classList.remove('hide');\n      dropDown.classList.add('show');\n      dropDown.classList.remove('hide');\n    })\n    .catch(error => {\n        // console.log(error);\n        Notiflix.Notify.warning('OOPS... SOMETHING WENT WRONG');\n    });\n}\n\nconst filterMoviesByGenre = e => {\n  const target = e.target;\n  const genreSelected = target.dataset.filter;\n\n  const chosenMovies = renderedMovies.filter(movie => {\n    const movieGenres = movie.genres.map(genre => genre.name.toLowerCase());\n    return movieGenres.includes(genreSelected.toLowerCase());\n  });\n//   console.log(chosenMovies);\n\n  if (genreSelected.toLowerCase() === 'all') {\n    gallery.innerHTML = '';\n    const galleryItems = movieMarkUp(renderedMovies);\n    gallery.insertAdjacentHTML('beforeend', galleryItems);\n    loadMore.classList.add('show');\n    loadMore.classList.remove('hide');\n  } else if (chosenMovies.length > 0) {\n    gallery.innerHTML = '';\n    const galleryItems = movieMarkUp(chosenMovies);\n    gallery.insertAdjacentHTML('beforeend', galleryItems);\n    loadMore.classList.add('show');\n    loadMore.classList.remove('hide');\n  } else {\n    gallery.innerHTML = `<h1 class=\"np_chosen\">Sorry but there are no ${genreSelected} movies in your Library...</h1>`;\n    loadMore.classList.add('hide');\n    loadMore.classList.remove('show');\n  }\n};\n\nconst movieMarkUp = dataComing => {\n  return dataComing\n    .map(item => {\n      const {\n        poster_path,\n        original_title,\n        release_date,\n        popularity,\n        id,\n        vote_average,\n      } = item;\n      const genre = item.genres\n        .map(genres => genres.name)\n        .slice(0, 2)\n        .join(', ');\n      const poster = item.poster_path;\n      const year = item.release_date.slice(0, 4);\n      let moviePoster = `https://image.tmdb.org/t/p/w500${poster_path}`;\n\n      if (poster_path === null) {\n        moviePoster = `https://marketplace.canva.com/EAE9OZ4Eh9o/1/0/1131w/canva-black-minimalist-coming-soon-poster-rmN33IHdOEM.jpg`;\n      }\n      let rating = vote_average;\n      const width = Math.round(rating) * 10;\n      return `\n\n        <li class=\"movie-item\">\n            <div class=\"movie\" data-catalog-item id=${id}>\n                <img class=\"movie-img\" src=${moviePoster}>\n\n\n                <div class=\"movie-info\">\n                    <div class=\"info\">\n                        <h2 class=\"movie-title\">${original_title}</h2>\n                        <div class=\"genre_year\">\n                            <h2 class=\"movie-genre\">${genre}</h2>\n                            <h2 class=\"movie-year\">${year}</h2></div>\n                        </div>\n                    <div>\n                        <span class=\"movie-rating\"></span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"form_item form_item_library\">\n            <div class=\"form_lebel\"> </div>\n            <div data-ajax=\"true\" class=\"rating rating_weekly  rating_set rating-hero\">\n              <div class=\"rating_body\">\n                <div class=\"rating_active ${id}\" style=\"width: ${width}%;\"></div>\n                <div class=\"rating_items\">\n                  <input type=\"radio\" aria-label=\"1 stars\" class=\"rating_item\" value=\"1\" name=\"rating\">\n                  <input type=\"radio\" aria-label=\"2 stars\" class=\"rating_item\" value=\"2\" name=\"rating\">\n                  <input type=\"radio\" aria-label=\"3 stars\" class=\"rating_item\" value=\"3\" name=\"rating\">\n                  <input type=\"radio\" aria-label=\"4 stars\" class=\"rating_item\" value=\"4\" name=\"rating\">\n                  <input type=\"radio\" aria-label=\"5 stars\" class=\"rating_item\" value=\"5\" name=\"rating\">\n                </div>\n              </div>\n            </div>\n          </div>\n        </li>`;\n    })\n    .join('');\n};\n\nwindow.onload = fetchFromLibrary;\n\ndropMenuLibrary.addEventListener('click', filterMoviesByGenre);\n"],"names":["$7Y9D8","parcelRequire","$c7fffb47ad68bea0$var$gallery","document","querySelector","$c7fffb47ad68bea0$var$loadMore","$c7fffb47ad68bea0$var$emptyGallery","$c7fffb47ad68bea0$var$dropDown","$c7fffb47ad68bea0$var$dropMenuLibrary","querySelectorAll","$c7fffb47ad68bea0$var$modalEl","addEventListener","$c7fffb47ad68bea0$var$fetchFromLibrary","$c7fffb47ad68bea0$var$renderedMovies","movieIds","JSON","parse","localStorage","getItem","length","innerHTML","classList","remove","add","fetchMovies","map","movie","fetch","id","then","data","json","Promise","all","movieData","push","moviesById","$c7fffb47ad68bea0$var$movieMarkUp","insertAdjacentHTML","catch","error","$parcel$interopDefault","Notify","warning","dataComing","item","poster_path","original_title","release_date","popularity","vote_average","genre","genres","name","slice","join","moviePoster","rating","Math","round","window","onload","e","genreSelected","target","dataset","filter","chosenMovies","toLowerCase","includes","galleryItems"],"version":3,"file":"library.f2562e52.js.map"}